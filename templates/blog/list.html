{% extends 'base.html' %}

{% block title %}Блог - Портфолио{% endblock %}

{% block content %}

<!-- Hero Section -->
<section class="section-padding pt-24">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16 animate-slide-up">
            <span class="inline-block px-4 py-2 rounded-full bg-gradient-to-r from-accent-purple/20 to-accent-pink/20 text-accent-purple text-sm font-medium mb-4">
                Мой блог
            </span>
            <h1 class="text-4xl md:text-6xl font-display font-bold text-gray-900 dark:text-white mb-6">
                Мысли и <span class="text-gradient">идеи</span>
            </h1>
            <p class="text-xl text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">
                Делюсь опытом, знаниями и техническими заметками о веб-разработке
            </p>
        </div>
    </div>
</section>

<!-- Blog Posts -->
<section class="pb-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        {% if posts %}
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {% for post in posts %}
            <article class="group card hover-lift overflow-hidden animate-on-scroll" style="animation-delay: {{ forloop.counter0|multiply:0.1 }}s;">
                <!-- Post Image/Gradient -->
                <div class="relative h-48 overflow-hidden bg-gradient-to-br 
                    {% cycle 'from-primary-400 to-primary-600' 'from-accent-purple to-accent-pink' 'from-accent-teal to-accent-orange' 'from-blue-500 to-indigo-600' %}">
                    <div class="absolute inset-0 flex items-center justify-center">
                        <i class="fas fa-blog text-white text-6xl opacity-20 group-hover:scale-110 transition-transform duration-500"></i>
                    </div>
                    
                    <!-- Date Badge -->
                    <div class="absolute top-4 right-4 px-3 py-2 rounded-xl bg-white dark:bg-gray-800 shadow-lg">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-gray-900 dark:text-white">{{ post.created_at|date:"d" }}</div>
                            <div class="text-xs text-gray-500 dark:text-gray-400">{{ post.created_at|date:"M" }}</div>
                        </div>
                    </div>
                </div>
                
                <!-- Post Content -->
                <div class="p-6 space-y-4">
                    <!-- Meta Info -->
                    <div class="flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400">
                        <span class="flex items-center">
                            <i class="far fa-clock mr-1"></i>
                            {{ post.content|wordcount|floatformat:0|add:"200"|floordiv:200 }} мин чтения
                        </span>
                    </div>
                    
                    <!-- Title -->
                    <h2 class="text-xl font-display font-bold text-gray-900 dark:text-white group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors line-clamp-2">
                        <a href="{% url 'blog:detail' post.slug %}">
                            {{ post.title }}
                        </a>
                    </h2>
                    
                    <!-- Tags -->
                    {% if post.tags %}
                    <div class="flex flex-wrap gap-2">
                        {% for tag in post.tag_list %}
                            {% if forloop.counter <= 3 %}
                            <span class="text-xs px-3 py-1 rounded-lg bg-primary-100 dark:bg-primary-900/50 text-primary-700 dark:text-primary-300">
                                #{{ tag|trim }}
                            </span>
                            {% endif %}
                        {% endfor %}
                    </div>
                    {% endif %}
                    
                    <!-- Excerpt -->
                    <p class="text-gray-600 dark:text-gray-400 line-clamp-3">
                        {% if post.excerpt %}
                            {{ post.excerpt }}
                        {% else %}
                            {{ post.content|truncatewords:20 }}
                        {% endif %}
                    </p>
                    
                    <!-- Read More Link -->
                    <a href="{% url 'blog:detail' post.slug %}" 
                       class="inline-flex items-center text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-semibold group/link">
                        <span>Читать далее</span>
                        <i class="fas fa-arrow-right ml-2 group-hover/link:translate-x-1 transition-transform"></i>
                    </a>
                </div>
                
                <!-- Post Footer -->
                <div class="px-6 py-4 bg-gray-50 dark:bg-gray-900/50 border-t border-gray-100 dark:border-gray-700 flex items-center justify-between text-sm">
                    <span class="text-gray-600 dark:text-gray-400">
                        <i class="fas fa-eye mr-2"></i>
                        243 просмотра
                    </span>
                    <span class="text-gray-600 dark:text-gray-400">
                        <i class="fas fa-heart mr-2 text-red-500"></i>
                        12
                    </span>
                </div>
            </article>
            {% endfor %}
        </div>
        
        <!-- Load More Button (if needed) -->
        <div class="mt-12 text-center">
            <button class="px-8 py-4 rounded-2xl font-medium bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-2 border-gray-200 dark:border-gray-700 hover:border-primary-500 dark:hover:border-primary-400 transition-all duration-300 shadow-sm hover:shadow-lg">
                Загрузить ещё
            </button>
        </div>
        
        {% else %}
        <!-- Empty State -->
        <div class="text-center py-20 animate-on-scroll">
            <div class="inline-flex items-center justify-center w-32 h-32 rounded-3xl bg-gradient-to-br from-accent-purple/20 to-accent-pink/20 mb-6">
                <i class="fas fa-pen-fancy text-6xl text-accent-purple"></i>
            </div>
            <h3 class="text-3xl font-display font-bold text-gray-900 dark:text-white mb-3">
                Пока нет постов
            </h3>
            <p class="text-xl text-gray-600 dark:text-gray-400 mb-8 max-w-md mx-auto">
                Скоро здесь появятся интересные статьи о разработке и технологиях!
            </p>
            <a href="/admin/blog/post/add/" 
               class="inline-flex items-center px-8 py-4 rounded-2xl font-medium bg-gradient-to-r from-accent-purple to-accent-pink text-white shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300">
                <i class="fas fa-plus mr-2"></i>
                Добавить первый пост
            </a>
        </div>
        {% endif %}
    </div>
</section>

<!-- Newsletter Section (Optional) -->
<section class="section-padding bg-gradient-to-br from-primary-600 via-accent-purple to-accent-pink">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <div class="space-y-6">
            <div class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-white/20 backdrop-blur-sm mb-4">
                <i class="fas fa-envelope text-white text-3xl"></i>
            </div>
            <h2 class="text-3xl md:text-4xl font-display font-bold text-white">
                Подпишитесь на рассылку
            </h2>
            <p class="text-xl text-white/90 max-w-2xl mx-auto">
                Получайте уведомления о новых статьях и обновлениях
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center max-w-md mx-auto">
                <input type="email" placeholder="your@email.com" 
                       class="flex-1 px-6 py-4 rounded-2xl bg-white/90 backdrop-blur-sm text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-4 focus:ring-white/50 transition-all">
                <button class="px-8 py-4 rounded-2xl font-medium bg-white text-primary-600 hover:bg-gray-100 transition-all transform hover:scale-105 shadow-lg">
                    Подписаться
                </button>
            </div>
        </div>
    </div>
</section>

<style>
.line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
}
</style>

{% endblock %}